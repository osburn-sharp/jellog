<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  File: README
  
    &mdash; Documentation by YARD 0.8.2.1
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>JELLOG</h1>

<p><em>(a.k.a. Jumpin Ermin's Loquatious Logger)</em></p>

<p>Based on the standard ruby logger, Jellog provides a slightly simplified interface and
adds a few features that may be useful:</p>

<ul>
<li>the ability to log to syslog for certain messages, which can be disabled during
setup;</li>
<li>formats its own timestamp to avoid other software from interferring under the bonnet;</li>
<li>colourises logs;</li>
<li>provides a 'puts' method to enable apps to output to either console or log (e.g foreground
vs background);</li>
<li>returns logged messages, e.g. to cascade into exceptions</li>
<li>simple log level control.</li>
</ul>


<p><strong>GitHub:</strong> <a href="https://github.com/osburn-sharp/jellog">https://github.com/osburn-sharp/jellog</a></p>

<p><strong>RubyDoc:</strong> <a href="http://rubydoc.info/github/osburn-sharp/jellog/frames">http://rubydoc.info/github/osburn-sharp/jellog/frames</a></p>

<p><strong>RubyGems:</strong> <a href="https://rubygems.org/gems/jellog">https://rubygems.org/gems/jellog</a></p>

<h2>Installation</h2>

<p>Distributed as a gem:</p>

<pre class="code ruby"><code><span class='rubyid_gem identifier id'>gem</span> <span class='rubyid_install identifier id'>install</span> <span class='rubyid_jellog identifier id'>jellog</span>
</code></pre>

<p>Jellog comes with a single command: jellog, that provides access to the README file in the gem.</p>

<p>Jellog can also be downloaded from <a href="https://github.com/osburn-sharp/jellog">GitHub</a>.</p>

<h2>Getting Started</h2>

<p>A simple example:</p>

<pre class="code ruby"><code><span class='rubyid_require identifier id'>require</span> <span class='string val'>'jellog'</span>
<span class='rubyid_@logger ivar id'>@logger</span> <span class='assign token'>=</span> <span class='rubyid_Jellog constant id'>Jellog</span><span class='colon2 op'>::</span><span class='rubyid_Logger constant id'>Logger</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_params identifier id'>params</span><span class='rparen token'>)</span>
<span class='rubyid_begin begin kw'>begin</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_system identifier id'>system</span><span class='lparen token'>(</span><span class='string val'>&quot;This is a system message and will be logged to syslog&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_info identifier id'>info</span><span class='lparen token'>(</span><span class='string val'>&quot;Just logged to local log&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_warn identifier id'>warn</span><span class='lparen token'>(</span><span class='string val'>&quot;As above&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_mark identifier id'>mark</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='string val'>&quot;As above&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_fatal identifier id'>fatal</span><span class='lparen token'>(</span><span class='string val'>&quot;Logged to syslog and prefixed with 'Jellog Alert:'&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_verbose identifier id'>verbose</span><span class='lparen token'>(</span><span class='string val'>&quot;Logged locally if log_level = :verbose or :debug&quot;</span><span class='rparen token'>)</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_debug identifier id'>debug</span><span class='lparen token'>(</span><span class='string val'>&quot;Logged locally if log_level = :debug&quot;</span><span class='rparen token'>)</span>
  <span class='comment val'># when things go wrong</span>
<span class='rubyid_rescue rescue kw'>rescue</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_err identifier id'>err</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_exception identifier id'>exception</span><span class='lparen token'>(</span><span class='rubyid_err identifier id'>err</span><span class='rparen token'>)</span> <span class='comment val'># logs the entire backtrace in colour</span>
<span class='rubyid_ensure ensure kw'>ensure</span>
  <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_close identifier id'>close</span>
<span class='rubyid_end end kw'>end</span>
</code></pre>

<p>This creates a jellog logger and logs a variety of messages before closing it. The parameters required
are defined in <span class='object_link'><a href="Jellog/Config.html" title="Jellog::Config (class)">Jellog::Config</a></span>, which is a subclass of Jeckyl::Config, (see <a href="https://github.com/osburn-sharp/jeckyl">Jeckyl on GitHub</a>
for more details):</p>

<pre class="code ruby"><code><span class='rubyid_require identifier id'>require</span> <span class='string val'>'jellog/config'</span>
<span class='rubyid_options identifier id'>options</span> <span class='assign token'>=</span> <span class='rubyid_Jellog constant id'>Jellog</span><span class='colon2 op'>::</span><span class='rubyid_Config constant id'>Config</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'path/to/config.rb'</span><span class='rparen token'>)</span>
<span class='rubyid_@logger ivar id'>@logger</span> <span class='assign token'>=</span> <span class='rubyid_Jellog constant id'>Jellog</span><span class='colon2 op'>::</span><span class='rubyid_Logger constant id'>Logger</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='string val'>'MyLogger'</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
</code></pre>

<p>Check out <span class='object_link'><a href="Jellog/Config.html" title="Jellog::Config (class)">Jellog::Config</a></span> for details about the logging parameters available for Jellog.</p>

<p>In addition to these conventional uses, Jellog provides the following to tailor the log:</p>

<pre class="code ruby"><code><span class='rubyid_logger identifier id'>logger</span> <span class='assign token'>=</span> <span class='rubyid_Jellog constant id'>Jellog</span><span class='colon2 op'>::</span><span class='rubyid_Logger constant id'>Logger</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='rubyid_name identifier id'>name</span><span class='comma token'>,</span> <span class='rubyid_options identifier id'>options</span><span class='rparen token'>)</span>
<span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_colours identifier id'>colours</span> <span class='assign token'>=</span> <span class='rubyid_colour_hash identifier id'>colour_hash</span>
<span class='rubyid_logger identifier id'>logger</span><span class='dot token'>.</span><span class='rubyid_log_level identifier id'>log_level</span> <span class='assign token'>=</span> <span class='symbol val'>:debug</span>
</code></pre>

<p>The colour_hash is a hash of :method => :colour (e.g. :fatal=>:blue) where colours are as defined
in term_ansicolor. There are three log levels:</p>

<ul>
<li>:system - basic logging required for normal applications</li>
<li>:verbose - additional logging that should help trouble-shooting during roll-out etc</li>
<li>:debug - lots of logging for development and testing purposes</li>
</ul>


<p>The <span class='object_link'><a href="Jellog/Logger.html#warn-instance_method" title="Jellog::Logger#warn (method)">warning</a></span>, <span class='object_link'><a href="Jellog/Logger.html#error-instance_method" title="Jellog::Logger#error (method)">error</a></span> and <span class='object_link'><a href="Jellog/Logger.html#fatal-instance_method" title="Jellog::Logger#fatal (method)">fatal</a></span> logging methods all return the message as
a string to make it convenient to cascade logging with exception raising:</p>

<pre class="code ruby"><code><span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_MyError constant id'>MyError</span><span class='comma token'>,</span> <span class='rubyid_@logger ivar id'>@logger</span><span class='dot token'>.</span><span class='rubyid_error identifier id'>error</span><span class='lparen token'>(</span><span class='string val'>&quot;You did something stupid&quot;</span><span class='rparen token'>)</span>
</code></pre>

<p>The <span class='object_link'><a href="Jellog/Logger.html#mark-instance_method" title="Jellog::Logger#mark (method)">mark</a></span> method simply puts a mark in the log, which can be set by one of the options.</p>

<p>There is also a <span class='object_link'><a href="Jellog/Logger.html#puts-instance_method" title="Jellog::Logger#puts (method)">puts</a></span> method that allows you to arrange output either to a standard out/error/file or a log
if required. This allows parts of your code to be agnostic about where messages go, e.g. in cases where you may or may not
daemonize a task.</p>

<p>When using the logger as part of a service (or any other application), it may be useful to extract the parameters that are specific
to the logger only. Check out the Jeckyl class method #intersection to get these options:</p>

<pre class="code ruby"><code><span class='rubyid_log_opts identifier id'>log_opts</span> <span class='assign token'>=</span> <span class='rubyid_Jellog constant id'>Jellog</span><span class='colon2 op'>::</span><span class='rubyid_Config constant id'>Config</span><span class='dot token'>.</span><span class='rubyid_intersection identifier id'>intersection</span><span class='lparen token'>(</span><span class='rubyid_full_opts identifier id'>full_opts</span><span class='rparen token'>)</span>
<span class='rubyid_nonlog_opts identifier id'>nonlog_opts</span> <span class='assign token'>=</span> <span class='rubyid_full_opts identifier id'>full_opts</span><span class='dot token'>.</span><span class='rubyid_complement identifier id'>complement</span><span class='lparen token'>(</span><span class='rubyid_log_opts identifier id'>log_opts</span><span class='rparen token'>)</span>
</code></pre>

<p>More details of Jeckyl can be found on <a href="https://github.com/osburn-sharp/jeckyl">GitHub</a>.</p>

<h2>Code Walkthrough</h2>

<p>The <span class='object_link'><a href="Jellog/Logger.html" title="Jellog::Logger (class)">Jellog::Logger</a></span> presents a public interface with a range of logging methods and fairly simple customising options. It does
not do any logging itself, but creates an instance of <span class='object_link'><a href="Jellog/Slogger.html" title="Jellog::Slogger (class)">Jellog::Slogger</a></span> that is a simple wrapper around the standard ruby logger
but uses its own timestamps to defeat any other part of an application from fiddling with these settings: the standard logger
time stamp format is defined in a global variable and other users can change it with impunity.</p>

<p>This all seems a little complicated and I suspect it may be historical, the ruby logger being wrapped in Slogger to avoid
naming conflicts with Jellog::logger. The little bit of meta-magic used in Slogger, however, makes controlling attributes such
as colour and timestamps relatively compact while preserving an easy-to-read, non-magical user interface.</p>

<h2>Dependencies</h2>

<p>See <a href="file.Gemfile.html" title="Gemfile">Gemfile</a> for gem dependencies.</p>

<h2>Documentation</h2>

<p>You can read this README file with 'jellog readme', but then as you are reading it you may already know this.</p>

<p>Use YARD to read the full documentation, which is available online at <a href="http://rdoc.info/github/osburn-sharp/jellog/frames">RubyDoc.info</a></p>

<h2>Testing/Modifying</h2>

<p>Download Jellog from <a href="https://github.com/osburn-sharp/jellog">GitHub</a> for testing. There is an rspec test that covers most of the functionality:</p>

<pre class="code ruby"><code><span class='rubyid_rspec identifier id'>rspec</span> <span class='rubyid_spec identifier id'>spec</span><span class='div op'>/</span><span class='rubyid_jellog_spec identifier id'>jellog_spec</span><span class='dot token'>.</span><span class='rubyid_rb identifier id'>rb</span> <span class='comment val'># tests the main functions</span>
<span class='rubyid_rspec identifier id'>rspec</span> <span class='rubyid_spec identifier id'>spec</span><span class='div op'>/</span><span class='rubyid_jellog_logger_spec identifier id'>jellog_logger_spec</span><span class='dot token'>.</span><span class='rubyid_rb identifier id'>rb</span> <span class='comment val'># tests colours (manually) and support</span>
<span class='rubyid_rspec identifier id'>rspec</span> <span class='rubyid_spec identifier id'>spec</span><span class='div op'>/</span><span class='rubyid_slogger_spec identifier id'>slogger_spec</span><span class='dot token'>.</span><span class='rubyid_rb identifier id'>rb</span> <span class='comment val'># manual check of underlying logger</span>
</code></pre>

<p>The last two tests don't really use rspec but generate logs in ./test and ./log which can be checked manually.</p>

<h2>Bugs and Issues</h2>

<p>Details of any unresolved bugs are in <a href="file.Bugs.html" title="Bugs">Bugs</a>.
Issues and change requests can be posted through <a href="https://github.com/osburn-sharp/jellog/issues">GitHub</a>.</p>

<h2>Changelog</h2>

<p>This can be found in the <a href="file.History.html" title="History">History</a> file. This file is used by Jevoom to manage the
version info and create git commits.</p>

<h2>Author and Contact</h2>

<p>I am Robert Sharp and you can contact me on <a href="http://github.com/osburn-sharp">GitHub</a></p>

<h2>Copyright and Licence</h2>

<p>Copyright (c) 2011-2012 Robert Sharp.</p>

<p>See <a href="file.LICENCE.html" title="LICENCE">LICENCE</a> for details of the licence under which Jeckyl is released.</p>

<h2>Warranty</h2>

<p>This software is provided "as is" and without any express or implied
warranties, including, without limitation, the implied warranties of
merchantibility and fitness for a particular purpose.</p>
</div></div>

    <div id="footer">
  Generated on Fri Nov 16 16:51:15 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.2.1 (ruby-1.8.7).
</div>

  </body>
</html>